<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Edit Profile</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #111827; /* bg-gray-900 */
      padding: 30px;
      margin: 0;
      color: #f3f4f6; /* text-gray-100 */
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: #1f2937; /* bg-gray-800 */
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }

    .tabs {
      display: flex;
      justify-content: space-around;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .tab {
      flex: 1;
      min-width: 150px;
      text-align: center;
      padding: 15px;
      background-color: #374151; /* bg-gray-700 */
      border-radius: 8px;
      margin: 5px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s ease;
      color: #f3f4f6; /* text-gray-100 */
    }

    .tab.active {
      background-color: #60a5fa; /* bg-primary */
      color: white;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    .section-header {
      background-color: #374151; /* bg-gray-700 */
      padding: 10px 20px;
      font-size: 20px;
      font-weight: bold;
      color: #60a5fa; /* text-primary */
      border-radius: 6px;
      margin-bottom: 20px;
      text-transform: uppercase;
    }

    .form-row {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .form-group {
      flex: 1 1 30%;
      display: flex;
      flex-direction: column;
    }

    label {
      margin-bottom: 8px;
      font-weight: 600;
      color: #d1d5db; /* text-gray-300 */
    }

    label.required::after {
      content: "*";
      color: red;
      margin-left: 4px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    input[type="number"],
    select,
    textarea {
      width: 100%;
      padding: 12px;
      background-color: #374151; /* bg-gray-700 */
      border: 1px solid #4b5563;
      border-radius: 6px;
      font-size: 1rem;
      color: #f3f4f6; /* text-gray-100 */
    }

    textarea {
      resize: vertical;
      height: 80px;
    }

    .subgroup {
      border: 2px solid #60a5fa; /* border-primary */
      border-radius: 10px;
      padding: 20px;
      flex: 1 1 100%;
      margin-bottom: 20px;
      background-color: #374151; /* bg-gray-700 */
    }

    .subgroup-title {
      font-weight: bold;
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: #60a5fa; /* text-primary */
      text-align: center;
      text-transform: uppercase;
    }

    ul.skill-list {
      list-style: none;
      padding: 0;
    }

    ul.skill-list li {
      background-color: #4b5563;
      padding: 10px;
      margin-bottom: 5px;
      display: flex;
      justify-content: space-between;
      border-radius: 5px;
      color: #f3f4f6; /* text-gray-100 */
    }

    ul.skill-list button {
      background-color: #ef4444;
      border: none;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      cursor: pointer;
    }

    .phone-input {
      display: flex;
      align-items: center;
    }

    .phone-input select {
      width: 80px;
      margin-right: 10px;
      background-color: #374151; /* bg-gray-700 */
      color: #f3f4f6; /* text-gray-100 */
      border: 1px solid #4b5563;
    }

    .phone-input input {
      flex: 1;
    }

    .error-message {
      color: #ef4444;
      font-size: 0.8rem;
      margin-top: 5px;
      display: none;
    }

    input.invalid, select.invalid {
      border-color: #ef4444;
    }

    @media (max-width: 768px) {
      .form-group {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="tabs">
      <div class="tab active" onclick="showTab('personal')">Personal Details</div>
      <div class="tab" onclick="showTab('qualifications')">Qualifications</div>
      <div class="tab" onclick="showTab('skills')">Skills</div>
    </div>

    <!-- PERSONAL DETAILS -->
    <div id="personal" class="section active">
      <div class="section-header">PERSONAL DETAILS</div>
      <div class="form-row">
        <div class="form-group">
          <label class="required">First Name</label>
          <input type="text" id="firstName" placeholder="Enter First Name">
        </div>
        <div class="form-group">
          <label>Middle Name</label>
          <input type="text" id="middleName" placeholder="Middle Name">
        </div>
        <div class="form-group">
          <label class="required">Last Name</label>
          <input type="text" id="lastName" placeholder="Enter Last Name">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="required">Email</label>
          <input type="email" id="email" placeholder="Enter Email (gmail/yahoo/outlook)">
          <div class="error-message" id="email-error">Please enter a valid email (gmail/yahoo/outlook)</div>
        </div>
        <div class="form-group">
          <label class="required">Mobile Number</label>
          <div class="phone-input">
            <select id="countryCode">
              <option value="+1">+1 (US)</option>
              <option value="+44">+44 (UK)</option>
              <option value="+91" selected>+91 (IN)</option>
              <option value="+61">+61 (AU)</option>
              <option value="+49">+49 (DE)</option>
              <option value="+81">+81 (JP)</option>
            </select>
            <input type="tel" id="phone" placeholder="Enter 10-digit Mobile Number" maxlength="10">
          </div>
          <div class="error-message" id="phone-error">Please enter a valid 10-digit phone number</div>
        </div>
        <div class="form-group">
          <label class="required">DOB</label>
          <input type="date" id="dob">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="required">Gender</label>
          <select id="gender">
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="required">Nationality</label>
          <select id="nationality">
            <option value="">Select Nationality</option>
            <option value="Indian">Indian</option>
            <option value="American">American</option>
            <option value="British">British</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label class="required">Category</label>
          <select id="category">
            <option value="">Select Category</option>
            <option value="General">General</option>
            <option value="SC">SC</option>
            <option value="ST">ST</option>
            <option value="OBC">OBC</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group" style="flex: 1 1 100%;">
          <label class="required">About Yourself</label>
          <textarea id="about" placeholder="Tell us about yourself..."></textarea>
        </div>
      </div>
    </div>

    <!-- QUALIFICATIONS -->
    <div id="qualifications" class="section">
      <div class="section-header">QUALIFICATIONS</div>

      <div class="subgroup">
        <div class="subgroup-title">HIGHEST EDUCATION</div>
        <div class="form-row">
          <div class="form-group">
            <label>Education Level</label>
            <select id="educationLevel" onchange="updateCourseOptions()">
              <option value="">Select Level</option>
              <option value="UG">Undergraduate (UG)</option>
              <option value="PG">Postgraduate (PG)</option>
            </select>
          </div>
          <div class="form-group">
            <label>Course</label>
            <select id="degree" onchange="updateStreamOptions()">
              <option value="">Select Course</option>
              <!-- Options will be populated by JavaScript -->
            </select>
          </div>
          <div class="form-group">
            <label>Stream/Specialization</label>
            <select id="stream">
              <option value="">Select Stream</option>
              <!-- Options will be populated by JavaScript -->
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>University</label>
            <input type="text" id="university" placeholder="University Name">
          </div>
          <div class="form-group">
            <label>Year of Studying</label>
            <select id="yearOfStudy">
              <option value="">Select Year</option>
              <option value="1st Year">1st Year</option>
              <option value="2nd Year">2nd Year</option>
              <option value="3rd Year">3rd Year</option>
              <option value="4th Year">4th Year</option>
              <option value="5th Year">5th Year</option>
              <option value="Completed">Completed</option>
            </select>
          </div>
          <div class="form-group">
            <label>CGPA</label>
            <input type="number" id="cgpa" step="0.01" min="0" max="10" placeholder="Enter CGPA" oninput="validateNumberInput(this)">
            <div class="error-message" id="cgpa-error">Please enter a value between 0 and 10</div>
          </div>
        </div>
      </div>
    </div>

    <!-- SKILLS -->
    <div id="skills" class="section">
      <div class="section-header">SKILLS</div>
      <p><strong>Selected Key Skills</strong></p>
      <ul id="skills-list" class="skill-list">
        <!-- Skills will be added here -->
      </ul>
      <div class="form-row">
        <div class="form-group" style="flex: 1 1 100%;">
          <label for="skill-input">Update Your Key Skills</label>
          <input type="text" id="skill-input" placeholder="Enter skill to add...">
        </div>
      </div>
      <div style="text-align: center;">
        <button onclick="addSkill()" style="
          background-color: #60a5fa; /* bg-primary */
          color: white;
          padding: 12px 30px;
          border: none;
          border-radius: 8px;
          font-size: 1rem;
          font-weight: bold;
          cursor: pointer;
        ">ADD</button>
      </div>
    </div>

    <!-- SAVE Button -->
    <div style="text-align: center; margin-top: 30px;">
      <button onclick="saveProfile()" style="
        background-color: #60a5fa; /* bg-primary */
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
      ">SAVE PROFILE</button>
    </div>
  </div>

  <script>
    // Course options for different education levels
    const courseOptions = {
      UG: ["BA", "BSc", "BCom", "BCA", "BTech", "MBBS", "BBA", "BArch", "BPharm"],
      PG: ["MA", "MSc", "MCom", "MCA", "MTech", "MBA", "MD", "MPharm", "PhD"]
    };

    // Stream options for different courses
    const streamOptions = {
      "BTech": ["Computer Science", "Information Technology", "Artificial Intelligence", "Electronics", "Mechanical", "Civil", "Electrical"],
      "MTech": ["Computer Science", "Data Science", "Artificial Intelligence", "VLSI", "Power Systems"],
      "BSc": ["Mathematics", "Physics", "Chemistry", "Biology", "Computer Science"],
      "MSc": ["Mathematics", "Physics", "Chemistry", "Biotechnology", "Computer Science"],
      "BA": ["English", "History", "Economics", "Political Science", "Psychology"],
      "MA": ["English", "History", "Economics", "Political Science", "Sociology"],
      "BCom": ["Accounting", "Finance", "Taxation", "Banking"],
      "MCom": ["Accounting", "Finance", "Business Economics"],
      "BCA": ["General", "Cloud Computing", "Data Science"],
      "MCA": ["General", "Cloud Computing", "Cyber Security"],
      "MBA": ["Finance", "Marketing", "HR", "Operations", "IT"],
      "BBA": ["Finance", "Marketing", "HR", "International Business"],
      "MBBS": ["General Medicine"],
      "MD": ["General Medicine", "Pediatrics", "Cardiology"],
      "BPharm": ["General"],
      "MPharm": ["Pharmaceutics", "Pharmacology"],
      "BArch": ["General"],
      "PhD": ["Computer Science", "Physics", "Chemistry", "Mathematics", "Economics"]
    };

    // Country codes for phone numbers
    const countryCodes = [
      { code: "+1", name: "US" },
      { code: "+44", name: "UK" },
      { code: "+91", name: "IN" },
      { code: "+61", name: "AU" },
      { code: "+49", name: "DE" },
      { code: "+81", name: "JP" }
    ];

    // Load saved data when page loads
    document.addEventListener('DOMContentLoaded', function() {
      const profileData = JSON.parse(localStorage.getItem('profileData')) || {};
      
      // Personal Details
      if (profileData.firstName) document.getElementById('firstName').value = profileData.firstName;
      if (profileData.middleName) document.getElementById('middleName').value = profileData.middleName;
      if (profileData.lastName) document.getElementById('lastName').value = profileData.lastName;
      if (profileData.email) document.getElementById('email').value = profileData.email;
      if (profileData.phone) document.getElementById('phone').value = profileData.phone;
      if (profileData.countryCode) document.getElementById('countryCode').value = profileData.countryCode;
      if (profileData.dob) document.getElementById('dob').value = profileData.dob;
      if (profileData.gender) document.getElementById('gender').value = profileData.gender;
      if (profileData.nationality) document.getElementById('nationality').value = profileData.nationality;
      if (profileData.category) document.getElementById('category').value = profileData.category;
      if (profileData.about) document.getElementById('about').value = profileData.about;
      
      // Education
      if (profileData.education) {
        if (profileData.education.level) {
          document.getElementById('educationLevel').value = profileData.education.level;
          updateCourseOptions();
        }
        if (profileData.education.degree) {
          document.getElementById('degree').value = profileData.education.degree;
          updateStreamOptions();
        }
        if (profileData.education.stream) document.getElementById('stream').value = profileData.education.stream;
        if (profileData.education.university) document.getElementById('university').value = profileData.education.university;
        if (profileData.education.yearOfStudy) document.getElementById('yearOfStudy').value = profileData.education.yearOfStudy;
        if (profileData.education.cgpa) document.getElementById('cgpa').value = profileData.education.cgpa;
      }
      
      // Skills
      if (profileData.skills) {
        const skillsList = document.getElementById('skills-list');
        skillsList.innerHTML = '';
        profileData.skills.forEach(skill => {
          const li = document.createElement('li');
          li.innerHTML = `<span>${skill}</span> <button onclick="this.parentElement.remove()">Delete</button>`;
          skillsList.appendChild(li);
        });
      }

      // Add input validation
      document.getElementById('phone').addEventListener('input', validatePhoneNumber);
      document.getElementById('email').addEventListener('input', validateEmail);
      document.getElementById('cgpa').addEventListener('input', validateCGPA);
    });

    function showTab(tabName) {
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
      document.querySelector(`.tab[onclick="showTab('${tabName}')"]`).classList.add('active');
      document.getElementById(tabName).classList.add('active');
    }

    function updateCourseOptions() {
      const level = document.getElementById('educationLevel').value;
      const degreeSelect = document.getElementById('degree');
      
      // Clear existing options except the first one
      degreeSelect.innerHTML = '<option value="">Select Course</option>';
      
      if (level && courseOptions[level]) {
        courseOptions[level].forEach(course => {
          const option = document.createElement('option');
          option.value = course;
          option.textContent = course;
          degreeSelect.appendChild(option);
        });
      }
      
      // Clear stream options
      document.getElementById('stream').innerHTML = '<option value="">Select Stream</option>';
    }

    function updateStreamOptions() {
      const course = document.getElementById('degree').value;
      const streamSelect = document.getElementById('stream');
      
      // Clear existing options except the first one
      streamSelect.innerHTML = '<option value="">Select Stream</option>';
      
      if (course && streamOptions[course]) {
        streamOptions[course].forEach(stream => {
          const option = document.createElement('option');
          option.value = stream;
          option.textContent = stream;
          streamSelect.appendChild(option);
        });
      }
    }

    function addSkill() {
      const skillInput = document.getElementById('skill-input');
      const skill = skillInput.value.trim();
      if (!skill) return;

      const list = document.getElementById('skills-list');
      const li = document.createElement('li');
      li.innerHTML = `<span>${skill}</span> <button onclick="this.parentElement.remove()">Delete</button>`;
      list.appendChild(li);
      skillInput.value = '';
    }

    function validateNumberInput(input) {
      // Ensure only numbers are entered in number fields
      input.value = input.value.replace(/[^0-9.]/g, '');
      
      // For CGPA specifically
      if (input.id === 'cgpa') {
        validateCGPA();
      }
    }

    function validatePhoneNumber() {
      const phoneInput = document.getElementById('phone');
      const phoneError = document.getElementById('phone-error');
      const phoneValue = phoneInput.value;
      
      // Check if it's exactly 10 digits
      if (/^\d{10}$/.test(phoneValue)) {
        phoneInput.classList.remove('invalid');
        phoneError.style.display = 'none';
        return true;
      } else {
        phoneInput.classList.add('invalid');
        phoneError.style.display = 'block';
        return false;
      }
    }

    function validateEmail() {
      const emailInput = document.getElementById('email');
      const emailError = document.getElementById('email-error');
      const emailValue = emailInput.value;
      
      // Check if it's a valid email with gmail/yahoo/outlook domain
      if (/^[a-zA-Z0-9._%+-]+@(gmail|yahoo|outlook)\.com$/.test(emailValue)) {
        emailInput.classList.remove('invalid');
        emailError.style.display = 'none';
        return true;
      } else {
        emailInput.classList.add('invalid');
        emailError.style.display = 'block';
        return false;
      }
    }

    function validateCGPA() {
      const cgpaInput = document.getElementById('cgpa');
      const cgpaError = document.getElementById('cgpa-error');
      const cgpaValue = parseFloat(cgpaInput.value);
      
      // Check if it's between 0 and 10
      if (cgpaValue >= 0 && cgpaValue <= 10) {
        cgpaInput.classList.remove('invalid');
        cgpaError.style.display = 'none';
        return true;
      } else {
        cgpaInput.classList.add('invalid');
        cgpaError.style.display = 'block';
        return false;
      }
    }

    function validateForm() {
      let isValid = true;
      
      // Validate required fields
      const requiredFields = [
        'firstName', 'lastName', 'email', 'phone', 'dob', 
        'gender', 'nationality', 'category', 'about'
      ];
      
      requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field.value) {
          field.classList.add('invalid');
          isValid = false;
        } else {
          field.classList.remove('invalid');
        }
      });
      
      // Validate specific fields
      if (!validateEmail()) isValid = false;
      if (!validatePhoneNumber()) isValid = false;
      if (!validateCGPA()) isValid = false;
      
      return isValid;
    }

    function saveProfile() {
      if (!validateForm()) {
        alert('Please fill all required fields correctly.');
        return;
      }

      // Get all form values
      const profileData = {
        firstName: document.getElementById('firstName').value,
        middleName: document.getElementById('middleName').value,
        lastName: document.getElementById('lastName').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        countryCode: document.getElementById('countryCode').value,
        dob: document.getElementById('dob').value,
        gender: document.getElementById('gender').value,
        nationality: document.getElementById('nationality').value,
        category: document.getElementById('category').value,
        about: document.getElementById('about').value,
        education: {
          level: document.getElementById('educationLevel').value,
          degree: document.getElementById('degree').value,
          stream: document.getElementById('stream').value,
          university: document.getElementById('university').value,
          yearOfStudy: document.getElementById('yearOfStudy').value,
          cgpa: document.getElementById('cgpa').value
        },
        skills: []
      };
      
      // Get skills from the list
      const skillItems = document.getElementById('skills-list').querySelectorAll('li');
      skillItems.forEach(item => {
        profileData.skills.push(item.querySelector('span').textContent);
      });
      
      // Save to localStorage
      localStorage.setItem('profileData', JSON.stringify(profileData));
      
      // Redirect to profile page
      window.location.href = "profile.html";
    }
  </script>
</body>
</html>